# 洗碗机自动上水控制
去年购买了一个小型洗碗机，没有自动上水功能，需要自己用水壶上水。

买回来后我就接了一个三通，引出一根3分水管，省去了手动上水的麻烦。

但是仍想继续改进，故购置了一个常闭电磁阀（通电开阀），准备用51单片机进行控制。

## 水满自动关阀

水位传感器，放在上水口处，水满后会淹没到该传感器，产生模拟信号，送给单片机，只要有信号产生即可判断水已满。

该传感器其实叫雨滴传感器，一块钱就可以买到，为了延长使用寿命，不能使其长时间浸入水中，否则容易发生氧化，以致失效。

那么水满后就要尽量及时启动洗碗机操作（启动后水位会马上下降，到另一位置开始加热），启动的操作就不去改装成自动化了，这是手动按钮控制的，改装起来太过麻烦，其实也没必要。

那如何能够及时启动洗碗机呢，实际上可以借助它原本的功能，就是水满后洗碗机会有声音提醒的，为了增强提醒效果，再增加一个蜂鸣器即可。

## 自动上水

最简单的想法就是在水箱最底部放入一个水位传感器，待水用尽，启动电磁阀即可。但是考虑到以下几个问题：

- 能够一直浸入水中的传感器成本过高
- 不知道洗碗机水箱内部构造，一是可能找不到合适尺寸的传感器，二是即使有尺寸特别小可以放进去的传感器，在某个位置也有可能被卡住，以至于无法置入最底部

综述所述，就换个思路，不去监测水位，而是借助时间判断。

洗碗机洗一次碗最长的时间是1.5h，另外一般不会连续洗碗，两次洗碗时间间隔基本为1天以上。那么可以设定在水满后，开始计时，计满2h后开始上水。

之所以没有间隔很久，是因为担心人不在家，系统出故障导致无法关闭电磁阀，那就惨了。所以就设置为2h的倒计时。

